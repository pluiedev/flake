when:
  - event: ["push", "pull_request", "manual"]
    branch: ["main"]

engine: "nixery"

# using the default values
clone:
  skip: false
  depth: 1
  submodules: false

dependencies:
  nixpkgs:
    - nix
    - cachix

environment:
  CACHE_NAME: "pluiedev"

steps:
  - name: "Check and cache Flake outputs"
    command: "USER=root cachix watch-exec $CACHE_NAME -- nix flake check --accept-flake-config $FLAKE_ATTR"
